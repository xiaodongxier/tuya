var un=Object.defineProperty;var sn=(a,o,s)=>o in a?un(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s;var je=(a,o,s)=>(sn(a,typeof o!="symbol"?o+"":o,s),s);(function(){"use strict";class Queue{constructor(o=1){je(this,"list",[]);je(this,"isRunning",!1);this.max=o}push(o){this.list.push(o),this.isRunning||this.do()}async do(){if(this.list.length===0){this.isRunning=!1;return}this.isRunning=!0;const o=[];for(let c=0;c<this.max;c++){const p=this.list.shift();p&&o.push(p)}const s=o.map(c=>c());await Promise.all(s),await this.do()}}var gifWasmBinaryFile="/assets/gif-CZFyTlq6.wasm";const gifsicle=function(){let a=gifWasmBinaryFile;var o=function(){var L=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(L=L||__filename),function(q){q=q||{};var h=typeof q<"u"?q:{},ae;h.ready=new Promise(function(e,r){ae=e}),h.preRun=h.preRun||[],h.preRun.push(function(){if(h.folder&&h.folder.length)for(let n=0;n<h.folder.length;n++){const u=h.folder[n];t.mkdir(u)}t.mkdir("/tem"),t.mkdir("/out");const r=h.input;for(let n=0;n<r.length;n++){const u=r[n];t.writeFile("/"+u.name,new Uint8Array(u.file))}}),h.postRun=h.postRun||[],h.postRun.push(function(){let r=[],n=t.readdir("/out");n.splice(0,2);for(let u=0;u<n.length;u++){let l=n[u],f=t.readFile("/out/"+l);r.push({file:f,name:l})}h.output(r)});var M={},T;for(T in h)h.hasOwnProperty(T)&&(M[T]=h[T]);var Y=[],F="./this.program",U=function(e,r){throw r},j=!1,z=!1,X=!1,We=!1;j=typeof window=="object",z=typeof importScripts=="function",X=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",We=!j&&!X&&!z;var $="",ue,me,we,Ce;X?(z?$=require("path").dirname($)+"/":$=__dirname+"/",ue=function(r,n){return we||(we=require("fs")),Ce||(Ce=require("path")),r=Ce.normalize(r),we.readFileSync(r,n?null:"utf8")},me=function(r){var n=ue(r,!0);return n.buffer||(n=new Uint8Array(n)),Ne(n.buffer),n},process.argv.length>1&&(F=process.argv[1].replace(/\\/g,"/")),Y=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof ze))throw e}),process.on("unhandledRejection",B),U=function(e){process.exit(e)},h.inspect=function(){return"[Emscripten Module object]"}):We?(typeof read<"u"&&(ue=function(r){return read(r)}),me=function(r){var n;return typeof readbuffer=="function"?new Uint8Array(readbuffer(r)):(n=read(r,"binary"),Ne(typeof n=="object"),n)},typeof scriptArgs<"u"?Y=scriptArgs:typeof arguments<"u"&&(Y=arguments),typeof quit=="function"&&(U=function(e){quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(j||z)&&(z?$=self.location.href:document.currentScript&&($=document.currentScript.src),L&&($=L),$.indexOf("blob:")!==0?$=$.substr(0,$.lastIndexOf("/")+1):$="",ue=function(r){var n=new XMLHttpRequest;return n.open("GET",r,!1),n.send(null),n.responseText},z&&(me=function(r){var n=new XMLHttpRequest;return n.open("GET",r,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}));var he=h.print||console.log.bind(console),H=h.printErr||console.warn.bind(console);for(T in M)M.hasOwnProperty(T)&&(h[T]=M[T]);M=null,h.arguments&&(Y=h.arguments),h.thisProgram&&(F=h.thisProgram),h.quit&&(U=h.quit);var pe;h.wasmBinary&&(pe=h.wasmBinary);var _e;h.noExitRuntime&&(_e=h.noExitRuntime),typeof WebAssembly!="object"&&H("no native wasm support detected");var ne,fr=new WebAssembly.Table({initial:64,maximum:64,element:"anyfunc"}),Oe=!1;function Ne(e,r){e||B("Assertion failed: "+r)}var Ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function se(e,r,n){for(var u=r+n,l=r;e[l]&&!(l>=u);)++l;if(l-r>16&&e.subarray&&Ve)return Ve.decode(e.subarray(r,l));for(var f="";r<l;){var d=e[r++];if(!(d&128)){f+=String.fromCharCode(d);continue}var m=e[r++]&63;if((d&224)==192){f+=String.fromCharCode((d&31)<<6|m);continue}var _=e[r++]&63;if((d&240)==224?d=(d&15)<<12|m<<6|_:d=(d&7)<<18|m<<12|_<<6|e[r++]&63,d<65536)f+=String.fromCharCode(d);else{var w=d-65536;f+=String.fromCharCode(55296|w>>10,56320|w&1023)}}return f}function Ee(e,r){return e?se(fe,e,r):""}function Ae(e,r,n,u){if(!(u>0))return 0;for(var l=n,f=n+u-1,d=0;d<e.length;++d){var m=e.charCodeAt(d);if(m>=55296&&m<=57343){var _=e.charCodeAt(++d);m=65536+((m&1023)<<10)|_&1023}if(m<=127){if(n>=f)break;r[n++]=m}else if(m<=2047){if(n+1>=f)break;r[n++]=192|m>>6,r[n++]=128|m&63}else if(m<=65535){if(n+2>=f)break;r[n++]=224|m>>12,r[n++]=128|m>>6&63,r[n++]=128|m&63}else{if(n+3>=f)break;r[n++]=240|m>>18,r[n++]=128|m>>12&63,r[n++]=128|m>>6&63,r[n++]=128|m&63}}return r[n]=0,n-l}function cr(e,r,n){return Ae(e,fe,r,n)}function Te(e){for(var r=0,n=0;n<e.length;++n){var u=e.charCodeAt(n);u>=55296&&u<=57343&&(u=65536+((u&1023)<<10)|e.charCodeAt(++n)&1023),u<=127?++r:u<=2047?r+=2:u<=65535?r+=3:r+=4}return r}function Ye(e){var r=Te(e)+1,n=Ue(r);return Ae(e,Z,n,r),n}function dr(e,r,n){for(var u=0;u<e.length;++u)Z[r++>>0]=e.charCodeAt(u);Z[r>>0]=0}var Ke=65536;function mr(e,r){return e%r>0&&(e+=r-e%r),e}var le,Z,fe,qe,b;function Ge(e){le=e,h.HEAP8=Z=new Int8Array(e),h.HEAP16=qe=new Int16Array(e),h.HEAP32=b=new Int32Array(e),h.HEAPU8=fe=new Uint8Array(e),h.HEAPU16=new Uint16Array(e),h.HEAPU32=new Uint32Array(e),h.HEAPF32=new Float32Array(e),h.HEAPF64=new Float64Array(e)}var hr=5282144,pr=39104,Je=h.INITIAL_MEMORY||16777216;h.wasmMemory?ne=h.wasmMemory:ne=new WebAssembly.Memory({initial:Je/Ke,maximum:2147483648/Ke}),ne&&(le=ne.buffer),Je=le.byteLength,Ge(le),b[pr>>2]=hr;function Se(e){for(;e.length>0;){var r=e.shift();if(typeof r=="function"){r(h);continue}var n=r.func;typeof n=="number"?r.arg===void 0?h.dynCall_v(n):h.dynCall_vi(n,r.arg):n(r.arg===void 0?null:r.arg)}}var Xe=[],$e=[],_r=[],Ze=[];function vr(){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)wr(h.preRun.shift());Se(Xe)}function yr(){!h.noFSInit&&!t.init.initialized&&t.init(),Se($e)}function gr(){t.ignorePermissions=!1,Se(_r)}function Mr(){if(h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;)Er(h.postRun.shift());Se(Ze)}function wr(e){Xe.unshift(e)}function Er(e){Ze.unshift(e)}var Ie=Math.abs,De=Math.ceil,Le=Math.floor,Fe=Math.min,te=0,ve=null;function Qe(e){te++,h.monitorRunDependencies&&h.monitorRunDependencies(te)}function Be(e){if(te--,h.monitorRunDependencies&&h.monitorRunDependencies(te),te==0&&ve){var r=ve;ve=null,r()}}h.preloadedImages={},h.preloadedAudios={};function B(e){throw h.onAbort&&h.onAbort(e),e+="",he(e),H(e),Oe=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function er(e,r){return String.prototype.startsWith?e.startsWith(r):e.indexOf(r)===0}var Ar="data:application/octet-stream;base64,";function Tr(e){return er(e,Ar)}var Sr="file://";function rr(e){return er(e,Sr)}var ie=a;function nr(){try{if(pe)return new Uint8Array(pe);if(me)return me(ie);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function br(){return!pe&&(j||z)&&typeof fetch=="function"&&!rr(ie)?fetch(ie,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ie+"'";return e.arrayBuffer()}).catch(function(){return nr()}):new Promise(function(e,r){e(nr())})}function Rr(){var e={a:on};function r(d,m){var _=d.exports;h.asm=_,Be()}Qe();function n(d){r(d.instance)}function u(d){return br().then(function(m){return WebAssembly.instantiate(m,e)}).then(d,function(m){H("failed to asynchronously prepare wasm: "+m),B(m)})}function l(){if(!pe&&typeof WebAssembly.instantiateStreaming=="function"&&!Tr(ie)&&!rr(ie)&&typeof fetch=="function")fetch(ie,{credentials:"same-origin"}).then(function(d){var m=WebAssembly.instantiateStreaming(d,e);return m.then(n,function(_){return H("wasm streaming compile failed: "+_),H("falling back to ArrayBuffer instantiation"),u(n)})});else return u(n)}if(h.instantiateWasm)try{var f=h.instantiateWasm(e,r);return f}catch(d){return H("Module.instantiateWasm callback failed with error: "+d),!1}return l(),{}}var x,re;$e.push({func:function(){or()}});function ln(e){return e}function kr(e){var r=/\b_Z[\w\d_]+/g;return e.replace(r,function(n){var u=n;return n===u?n:u+" ["+n+"]"})}function Pr(){var e=new Error;if(!e.stack){try{throw new Error}catch(r){e=r}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function Cr(){var e=Pr();return h.extraStackTrace&&(e+=`
`+h.extraStackTrace()),kr(e)}function Or(e,r,n,u){B("Assertion failed: "+Ee(e)+", at: "+[r?Ee(r):"unknown filename",n,u?Ee(u):"unknown function"])}var be;X?be=function(){var e=process.hrtime();return e[0]*1e3+e[1]/1e6}:typeof dateNow<"u"?be=dateNow:be=function(){return performance.now()};var Nr=!0;function ye(e){return b[ur()>>2]=e,e}function Ir(e,r){var n;if(e===0)n=Date.now();else if((e===1||e===4)&&Nr)n=be();else return ye(28),-1;return b[r>>2]=n/1e3|0,b[r+4>>2]=n%1e3*1e3*1e3|0,0}function Dr(e,r){return Ir(e,r)}var C={splitPath:function(e){var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:function(e,r){for(var n=0,u=e.length-1;u>=0;u--){var l=e[u];l==="."?e.splice(u,1):l===".."?(e.splice(u,1),n++):n&&(e.splice(u,1),n--)}if(r)for(;n;n--)e.unshift("..");return e},normalize:function(e){var r=e.charAt(0)==="/",n=e.substr(-1)==="/";return e=C.normalizeArray(e.split("/").filter(function(u){return!!u}),!r).join("/"),!e&&!r&&(e="."),e&&n&&(e+="/"),(r?"/":"")+e},dirname:function(e){var r=C.splitPath(e),n=r[0],u=r[1];return!n&&!u?".":(u&&(u=u.substr(0,u.length-1)),n+u)},basename:function(e){if(e==="/")return"/";var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},extname:function(e){return C.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return C.normalize(e.join("/"))},join2:function(e,r){return C.normalize(e+"/"+r)}},Q={resolve:function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var u=n>=0?arguments[n]:t.cwd();if(typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";e=u+"/"+e,r=u.charAt(0)==="/"}return e=C.normalizeArray(e.split("/").filter(function(l){return!!l}),!r).join("/"),(r?"/":"")+e||"."},relative:function(e,r){e=Q.resolve(e).substr(1),r=Q.resolve(r).substr(1);function n(w){for(var k=0;k<w.length&&w[k]==="";k++);for(var P=w.length-1;P>=0&&w[P]==="";P--);return k>P?[]:w.slice(k,P-k+1)}for(var u=n(e.split("/")),l=n(r.split("/")),f=Math.min(u.length,l.length),d=f,m=0;m<f;m++)if(u[m]!==l[m]){d=m;break}for(var _=[],m=d;m<u.length;m++)_.push("..");return _=_.concat(l.slice(d)),_.join("/")}},oe={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){oe.ttys[e]={input:[],output:[],ops:r},t.registerDevice(e,oe.stream_ops)},stream_ops:{open:function(e){var r=oe.ttys[e.node.rdev];if(!r)throw new t.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,r,n,u,l){if(!e.tty||!e.tty.ops.get_char)throw new t.ErrnoError(60);for(var f=0,d=0;d<u;d++){var m;try{m=e.tty.ops.get_char(e.tty)}catch{throw new t.ErrnoError(29)}if(m===void 0&&f===0)throw new t.ErrnoError(6);if(m==null)break;f++,r[n+d]=m}return f&&(e.node.timestamp=Date.now()),f},write:function(e,r,n,u,l){if(!e.tty||!e.tty.ops.put_char)throw new t.ErrnoError(60);try{for(var f=0;f<u;f++)e.tty.ops.put_char(e.tty,r[n+f])}catch{throw new t.ErrnoError(29)}return u&&(e.node.timestamp=Date.now()),f}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if(X){var n=256,u=Buffer.alloc?Buffer.alloc(n):new Buffer(n),l=0;try{l=we.readSync(process.stdin.fd,u,0,n,null)}catch(f){if(f.toString().indexOf("EOF")!=-1)l=0;else throw f}l>0?r=u.slice(0,l).toString("utf-8"):r=null}else typeof window<"u"&&typeof window.prompt=="function"?(r=window.prompt("Input: "),r!==null&&(r+=`
`)):typeof readline=="function"&&(r=readline(),r!==null&&(r+=`
`));if(!r)return null;e.input=He(r)}return e.input.shift()},put_char:function(e,r){r===null||r===10?(he(se(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(he(se(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(H(se(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(H(se(e.output,0)),e.output=[])}}},R={ops_table:null,mount:function(e){return R.createNode(null,"/",16895,0)},createNode:function(e,r,n,u){if(t.isBlkdev(n)||t.isFIFO(n))throw new t.ErrnoError(63);R.ops_table||(R.ops_table={dir:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr,lookup:R.node_ops.lookup,mknod:R.node_ops.mknod,rename:R.node_ops.rename,unlink:R.node_ops.unlink,rmdir:R.node_ops.rmdir,readdir:R.node_ops.readdir,symlink:R.node_ops.symlink},stream:{llseek:R.stream_ops.llseek}},file:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr},stream:{llseek:R.stream_ops.llseek,read:R.stream_ops.read,write:R.stream_ops.write,allocate:R.stream_ops.allocate,mmap:R.stream_ops.mmap,msync:R.stream_ops.msync}},link:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr,readlink:R.node_ops.readlink},stream:{}},chrdev:{node:{getattr:R.node_ops.getattr,setattr:R.node_ops.setattr},stream:t.chrdev_stream_ops}});var l=t.createNode(e,r,n,u);return t.isDir(l.mode)?(l.node_ops=R.ops_table.dir.node,l.stream_ops=R.ops_table.dir.stream,l.contents={}):t.isFile(l.mode)?(l.node_ops=R.ops_table.file.node,l.stream_ops=R.ops_table.file.stream,l.usedBytes=0,l.contents=null):t.isLink(l.mode)?(l.node_ops=R.ops_table.link.node,l.stream_ops=R.ops_table.link.stream):t.isChrdev(l.mode)&&(l.node_ops=R.ops_table.chrdev.node,l.stream_ops=R.ops_table.chrdev.stream),l.timestamp=Date.now(),e&&(e.contents[r]=l),l},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var r=[],n=0;n<e.usedBytes;++n)r.push(e.contents[n]);return r}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,r){var n=e.contents?e.contents.length:0;if(!(n>=r)){var u=1024*1024;r=Math.max(r,n*(n<u?2:1.125)>>>0),n!=0&&(r=Math.max(r,256));var l=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(l.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(e.usedBytes!=r){if(r==0){e.contents=null,e.usedBytes=0;return}if(!e.contents||e.contents.subarray){var n=e.contents;e.contents=new Uint8Array(r),n&&e.contents.set(n.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r;return}if(e.contents||(e.contents=[]),e.contents.length>r)e.contents.length=r;else for(;e.contents.length<r;)e.contents.push(0);e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=t.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,t.isDir(e.mode)?r.size=4096:t.isFile(e.mode)?r.size=e.usedBytes:t.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&R.resizeFileStorage(e,r.size)},lookup:function(e,r){throw t.genericErrors[44]},mknod:function(e,r,n,u){return R.createNode(e,r,n,u)},rename:function(e,r,n){if(t.isDir(e.mode)){var u;try{u=t.lookupNode(r,n)}catch{}if(u)for(var l in u.contents)throw new t.ErrnoError(55)}delete e.parent.contents[e.name],e.name=n,r.contents[n]=e,e.parent=r},unlink:function(e,r){delete e.contents[r]},rmdir:function(e,r){var n=t.lookupNode(e,r);for(var u in n.contents)throw new t.ErrnoError(55);delete e.contents[r]},readdir:function(e){var r=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&r.push(n);return r},symlink:function(e,r,n){var u=R.createNode(e,r,41471,0);return u.link=n,u},readlink:function(e){if(!t.isLink(e.mode))throw new t.ErrnoError(28);return e.link}},stream_ops:{read:function(e,r,n,u,l){var f=e.node.contents;if(l>=e.node.usedBytes)return 0;var d=Math.min(e.node.usedBytes-l,u);if(d>8&&f.subarray)r.set(f.subarray(l,l+d),n);else for(var m=0;m<d;m++)r[n+m]=f[l+m];return d},write:function(e,r,n,u,l,f){if(r.buffer===Z.buffer&&(f=!1),!u)return 0;var d=e.node;if(d.timestamp=Date.now(),r.subarray&&(!d.contents||d.contents.subarray)){if(f)return d.contents=r.subarray(n,n+u),d.usedBytes=u,u;if(d.usedBytes===0&&l===0)return d.contents=r.slice(n,n+u),d.usedBytes=u,u;if(l+u<=d.usedBytes)return d.contents.set(r.subarray(n,n+u),l),u}if(R.expandFileStorage(d,l+u),d.contents.subarray&&r.subarray)d.contents.set(r.subarray(n,n+u),l);else for(var m=0;m<u;m++)d.contents[l+m]=r[n+m];return d.usedBytes=Math.max(d.usedBytes,l+u),u},llseek:function(e,r,n){var u=r;if(n===1?u+=e.position:n===2&&t.isFile(e.node.mode)&&(u+=e.node.usedBytes),u<0)throw new t.ErrnoError(28);return u},allocate:function(e,r,n){R.expandFileStorage(e.node,r+n),e.node.usedBytes=Math.max(e.node.usedBytes,r+n)},mmap:function(e,r,n,u,l,f){if(Ne(r===0),!t.isFile(e.node.mode))throw new t.ErrnoError(43);var d,m,_=e.node.contents;if(!(f&2)&&_.buffer===le)m=!1,d=_.byteOffset;else{if((u>0||u+n<_.length)&&(_.subarray?_=_.subarray(u,u+n):_=Array.prototype.slice.call(_,u,u+n)),m=!0,d=ar(n),!d)throw new t.ErrnoError(48);Z.set(_,d)}return{ptr:d,allocated:m}},msync:function(e,r,n,u,l){if(!t.isFile(e.node.mode))throw new t.ErrnoError(43);return l&2||R.stream_ops.write(e,r,0,u,n,!1),0}}},t={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof t.ErrnoError))throw e+" : "+Cr();return ye(e.errno)},lookupPath:function(e,r){if(e=Q.resolve(t.cwd(),e),r=r||{},!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var u in n)r[u]===void 0&&(r[u]=n[u]);if(r.recurse_count>8)throw new t.ErrnoError(32);for(var l=C.normalizeArray(e.split("/").filter(function(A){return!!A}),!1),f=t.root,d="/",m=0;m<l.length;m++){var _=m===l.length-1;if(_&&r.parent)break;if(f=t.lookupNode(f,l[m]),d=C.join2(d,l[m]),t.isMountpoint(f)&&(!_||_&&r.follow_mount)&&(f=f.mounted.root),!_||r.follow)for(var w=0;t.isLink(f.mode);){var k=t.readlink(d);d=Q.resolve(C.dirname(d),k);var P=t.lookupPath(d,{recurse_count:r.recurse_count});if(f=P.node,w++>40)throw new t.ErrnoError(32)}}return{path:d,node:f}},getPath:function(e){for(var r;;){if(t.isRoot(e)){var n=e.mount.mountpoint;return r?n[n.length-1]!=="/"?n+"/"+r:n+r:n}r=r?e.name+"/"+r:e.name,e=e.parent}},hashName:function(e,r){for(var n=0,u=0;u<r.length;u++)n=(n<<5)-n+r.charCodeAt(u)|0;return(e+n>>>0)%t.nameTable.length},hashAddNode:function(e){var r=t.hashName(e.parent.id,e.name);e.name_next=t.nameTable[r],t.nameTable[r]=e},hashRemoveNode:function(e){var r=t.hashName(e.parent.id,e.name);if(t.nameTable[r]===e)t.nameTable[r]=e.name_next;else for(var n=t.nameTable[r];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,r){var n=t.mayLookup(e);if(n)throw new t.ErrnoError(n,e);for(var u=t.hashName(e.id,r),l=t.nameTable[u];l;l=l.name_next){var f=l.name;if(l.parent.id===e.id&&f===r)return l}return t.lookup(e,r)},createNode:function(e,r,n,u){var l=new t.FSNode(e,r,n,u);return t.hashAddNode(l),l},destroyNode:function(e){t.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return(e&61440)===32768},isDir:function(e){return(e&61440)===16384},isLink:function(e){return(e&61440)===40960},isChrdev:function(e){return(e&61440)===8192},isBlkdev:function(e){return(e&61440)===24576},isFIFO:function(e){return(e&61440)===4096},isSocket:function(e){return(e&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var r=t.flagModes[e];if(typeof r>"u")throw new Error("Unknown file open mode: "+e);return r},flagsToPermissionString:function(e){var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:function(e,r){return t.ignorePermissions?0:r.indexOf("r")!==-1&&!(e.mode&292)||r.indexOf("w")!==-1&&!(e.mode&146)||r.indexOf("x")!==-1&&!(e.mode&73)?2:0},mayLookup:function(e){var r=t.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:function(e,r){try{var n=t.lookupNode(e,r);return 20}catch{}return t.nodePermissions(e,"wx")},mayDelete:function(e,r,n){var u;try{u=t.lookupNode(e,r)}catch(f){return f.errno}var l=t.nodePermissions(e,"wx");if(l)return l;if(n){if(!t.isDir(u.mode))return 54;if(t.isRoot(u)||t.getPath(u)===t.cwd())return 10}else if(t.isDir(u.mode))return 31;return 0},mayOpen:function(e,r){return e?t.isLink(e.mode)?32:t.isDir(e.mode)&&(t.flagsToPermissionString(r)!=="r"||r&512)?31:t.nodePermissions(e,t.flagsToPermissionString(r)):44},MAX_OPEN_FDS:4096,nextfd:function(e,r){e=e||0,r=r||t.MAX_OPEN_FDS;for(var n=e;n<=r;n++)if(!t.streams[n])return n;throw new t.ErrnoError(33)},getStream:function(e){return t.streams[e]},createStream:function(e,r,n){t.FSStream||(t.FSStream=function(){},t.FSStream.prototype={object:{get:function(){return this.node},set:function(d){this.node=d}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var u=new t.FSStream;for(var l in e)u[l]=e[l];e=u;var f=t.nextfd(r,n);return e.fd=f,t.streams[f]=e,e},closeStream:function(e){t.streams[e]=null},chrdev_stream_ops:{open:function(e){var r=t.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new t.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return e&255},makedev:function(e,r){return e<<8|r},registerDevice:function(e,r){t.devices[e]={stream_ops:r}},getDevice:function(e){return t.devices[e]},getMounts:function(e){for(var r=[],n=[e];n.length;){var u=n.pop();r.push(u),n.push.apply(n,u.mounts)}return r},syncfs:function(e,r){typeof e=="function"&&(r=e,e=!1),t.syncFSRequests++,t.syncFSRequests>1&&H("warning: "+t.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=t.getMounts(t.root.mount),u=0;function l(d){return t.syncFSRequests--,r(d)}function f(d){if(d)return f.errored?void 0:(f.errored=!0,l(d));++u>=n.length&&l(null)}n.forEach(function(d){if(!d.type.syncfs)return f(null);d.type.syncfs(d,e,f)})},mount:function(e,r,n){var u=n==="/",l=!n,f;if(u&&t.root)throw new t.ErrnoError(10);if(!u&&!l){var d=t.lookupPath(n,{follow_mount:!1});if(n=d.path,f=d.node,t.isMountpoint(f))throw new t.ErrnoError(10);if(!t.isDir(f.mode))throw new t.ErrnoError(54)}var m={type:e,opts:r,mountpoint:n,mounts:[]},_=e.mount(m);return _.mount=m,m.root=_,u?t.root=_:f&&(f.mounted=m,f.mount&&f.mount.mounts.push(m)),_},unmount:function(e){var r=t.lookupPath(e,{follow_mount:!1});if(!t.isMountpoint(r.node))throw new t.ErrnoError(28);var n=r.node,u=n.mounted,l=t.getMounts(u);Object.keys(t.nameTable).forEach(function(d){for(var m=t.nameTable[d];m;){var _=m.name_next;l.indexOf(m.mount)!==-1&&t.destroyNode(m),m=_}}),n.mounted=null;var f=n.mount.mounts.indexOf(u);n.mount.mounts.splice(f,1)},lookup:function(e,r){return e.node_ops.lookup(e,r)},mknod:function(e,r,n){var u=t.lookupPath(e,{parent:!0}),l=u.node,f=C.basename(e);if(!f||f==="."||f==="..")throw new t.ErrnoError(28);var d=t.mayCreate(l,f);if(d)throw new t.ErrnoError(d);if(!l.node_ops.mknod)throw new t.ErrnoError(63);return l.node_ops.mknod(l,f,r,n)},create:function(e,r){return r=r!==void 0?r:438,r&=4095,r|=32768,t.mknod(e,r,0)},mkdir:function(e,r){return r=r!==void 0?r:511,r&=1023,r|=16384,t.mknod(e,r,0)},mkdirTree:function(e,r){for(var n=e.split("/"),u="",l=0;l<n.length;++l)if(n[l]){u+="/"+n[l];try{t.mkdir(u,r)}catch(f){if(f.errno!=20)throw f}}},mkdev:function(e,r,n){return typeof n>"u"&&(n=r,r=438),r|=8192,t.mknod(e,r,n)},symlink:function(e,r){if(!Q.resolve(e))throw new t.ErrnoError(44);var n=t.lookupPath(r,{parent:!0}),u=n.node;if(!u)throw new t.ErrnoError(44);var l=C.basename(r),f=t.mayCreate(u,l);if(f)throw new t.ErrnoError(f);if(!u.node_ops.symlink)throw new t.ErrnoError(63);return u.node_ops.symlink(u,l,e)},rename:function(e,r){var n=C.dirname(e),u=C.dirname(r),l=C.basename(e),f=C.basename(r),d,m,_;try{d=t.lookupPath(e,{parent:!0}),m=d.node,d=t.lookupPath(r,{parent:!0}),_=d.node}catch{throw new t.ErrnoError(10)}if(!m||!_)throw new t.ErrnoError(44);if(m.mount!==_.mount)throw new t.ErrnoError(75);var w=t.lookupNode(m,l),k=Q.relative(e,u);if(k.charAt(0)!==".")throw new t.ErrnoError(28);if(k=Q.relative(r,n),k.charAt(0)!==".")throw new t.ErrnoError(55);var P;try{P=t.lookupNode(_,f)}catch{}if(w!==P){var A=t.isDir(w.mode),S=t.mayDelete(m,l,A);if(S)throw new t.ErrnoError(S);if(S=P?t.mayDelete(_,f,A):t.mayCreate(_,f),S)throw new t.ErrnoError(S);if(!m.node_ops.rename)throw new t.ErrnoError(63);if(t.isMountpoint(w)||P&&t.isMountpoint(P))throw new t.ErrnoError(10);if(_!==m&&(S=t.nodePermissions(m,"w"),S))throw new t.ErrnoError(S);try{t.trackingDelegate.willMovePath}catch(O){H("FS.trackingDelegate['willMovePath']('"+e+"', '"+r+"') threw an exception: "+O.message)}t.hashRemoveNode(w);try{m.node_ops.rename(w,_,f)}catch(O){throw O}finally{t.hashAddNode(w)}try{t.trackingDelegate.onMovePath}catch(O){H("FS.trackingDelegate['onMovePath']('"+e+"', '"+r+"') threw an exception: "+O.message)}}},rmdir:function(e){var r=t.lookupPath(e,{parent:!0}),n=r.node,u=C.basename(e),l=t.lookupNode(n,u),f=t.mayDelete(n,u,!0);if(f)throw new t.ErrnoError(f);if(!n.node_ops.rmdir)throw new t.ErrnoError(63);if(t.isMountpoint(l))throw new t.ErrnoError(10);try{t.trackingDelegate.willDeletePath}catch(d){H("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+d.message)}n.node_ops.rmdir(n,u),t.destroyNode(l);try{t.trackingDelegate.onDeletePath}catch(d){H("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+d.message)}},readdir:function(e){var r=t.lookupPath(e,{follow:!0}),n=r.node;if(!n.node_ops.readdir)throw new t.ErrnoError(54);return n.node_ops.readdir(n)},unlink:function(e){var r=t.lookupPath(e,{parent:!0}),n=r.node,u=C.basename(e),l=t.lookupNode(n,u),f=t.mayDelete(n,u,!1);if(f)throw new t.ErrnoError(f);if(!n.node_ops.unlink)throw new t.ErrnoError(63);if(t.isMountpoint(l))throw new t.ErrnoError(10);try{t.trackingDelegate.willDeletePath}catch(d){H("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+d.message)}n.node_ops.unlink(n,u),t.destroyNode(l);try{t.trackingDelegate.onDeletePath}catch(d){H("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+d.message)}},readlink:function(e){var r=t.lookupPath(e),n=r.node;if(!n)throw new t.ErrnoError(44);if(!n.node_ops.readlink)throw new t.ErrnoError(28);return Q.resolve(t.getPath(n.parent),n.node_ops.readlink(n))},stat:function(e,r){var n=t.lookupPath(e,{follow:!r}),u=n.node;if(!u)throw new t.ErrnoError(44);if(!u.node_ops.getattr)throw new t.ErrnoError(63);return u.node_ops.getattr(u)},lstat:function(e){return t.stat(e,!0)},chmod:function(e,r,n){var u;if(typeof e=="string"){var l=t.lookupPath(e,{follow:!n});u=l.node}else u=e;if(!u.node_ops.setattr)throw new t.ErrnoError(63);u.node_ops.setattr(u,{mode:r&4095|u.mode&-4096,timestamp:Date.now()})},lchmod:function(e,r){t.chmod(e,r,!0)},fchmod:function(e,r){var n=t.getStream(e);if(!n)throw new t.ErrnoError(8);t.chmod(n.node,r)},chown:function(e,r,n,u){var l;if(typeof e=="string"){var f=t.lookupPath(e,{follow:!u});l=f.node}else l=e;if(!l.node_ops.setattr)throw new t.ErrnoError(63);l.node_ops.setattr(l,{timestamp:Date.now()})},lchown:function(e,r,n){t.chown(e,r,n,!0)},fchown:function(e,r,n){var u=t.getStream(e);if(!u)throw new t.ErrnoError(8);t.chown(u.node,r,n)},truncate:function(e,r){if(r<0)throw new t.ErrnoError(28);var n;if(typeof e=="string"){var u=t.lookupPath(e,{follow:!0});n=u.node}else n=e;if(!n.node_ops.setattr)throw new t.ErrnoError(63);if(t.isDir(n.mode))throw new t.ErrnoError(31);if(!t.isFile(n.mode))throw new t.ErrnoError(28);var l=t.nodePermissions(n,"w");if(l)throw new t.ErrnoError(l);n.node_ops.setattr(n,{size:r,timestamp:Date.now()})},ftruncate:function(e,r){var n=t.getStream(e);if(!n)throw new t.ErrnoError(8);if(!(n.flags&2097155))throw new t.ErrnoError(28);t.truncate(n.node,r)},utime:function(e,r,n){var u=t.lookupPath(e,{follow:!0}),l=u.node;l.node_ops.setattr(l,{timestamp:Math.max(r,n)})},open:function(e,r,n,u,l){if(e==="")throw new t.ErrnoError(44);r=typeof r=="string"?t.modeStringToFlags(r):r,n=typeof n>"u"?438:n,r&64?n=n&4095|32768:n=0;var f;if(typeof e=="object")f=e;else{e=C.normalize(e);try{var d=t.lookupPath(e,{follow:!(r&131072)});f=d.node}catch{}}var m=!1;if(r&64)if(f){if(r&128)throw new t.ErrnoError(20)}else f=t.mknod(e,n,0),m=!0;if(!f)throw new t.ErrnoError(44);if(t.isChrdev(f.mode)&&(r&=-513),r&65536&&!t.isDir(f.mode))throw new t.ErrnoError(54);if(!m){var _=t.mayOpen(f,r);if(_)throw new t.ErrnoError(_)}r&512&&t.truncate(f,0),r&=-131713;var w=t.createStream({node:f,path:t.getPath(f),flags:r,seekable:!0,position:0,stream_ops:f.stream_ops,ungotten:[],error:!1},u,l);w.stream_ops.open&&w.stream_ops.open(w),h.logReadFiles&&!(r&1)&&(t.readFiles||(t.readFiles={}),e in t.readFiles||(t.readFiles[e]=1,H("FS.trackingDelegate error on read file: "+e)));try{var k;t.trackingDelegate.onOpenFile}catch(P){H("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+P.message)}return w},close:function(e){if(t.isClosed(e))throw new t.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{t.closeStream(e.fd)}e.fd=null},isClosed:function(e){return e.fd===null},llseek:function(e,r,n){if(t.isClosed(e))throw new t.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new t.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new t.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,n),e.ungotten=[],e.position},read:function(e,r,n,u,l){if(u<0||l<0)throw new t.ErrnoError(28);if(t.isClosed(e))throw new t.ErrnoError(8);if((e.flags&2097155)===1)throw new t.ErrnoError(8);if(t.isDir(e.node.mode))throw new t.ErrnoError(31);if(!e.stream_ops.read)throw new t.ErrnoError(28);var f=typeof l<"u";if(!f)l=e.position;else if(!e.seekable)throw new t.ErrnoError(70);var d=e.stream_ops.read(e,r,n,u,l);return f||(e.position+=d),d},write:function(e,r,n,u,l,f){if(u<0||l<0)throw new t.ErrnoError(28);if(t.isClosed(e))throw new t.ErrnoError(8);if(!(e.flags&2097155))throw new t.ErrnoError(8);if(t.isDir(e.node.mode))throw new t.ErrnoError(31);if(!e.stream_ops.write)throw new t.ErrnoError(28);e.seekable&&e.flags&1024&&t.llseek(e,0,2);var d=typeof l<"u";if(!d)l=e.position;else if(!e.seekable)throw new t.ErrnoError(70);var m=e.stream_ops.write(e,r,n,u,l,f);d||(e.position+=m);try{e.path&&t.trackingDelegate.onWriteToFile&&t.trackingDelegate.onWriteToFile(e.path)}catch(_){H("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+_.message)}return m},allocate:function(e,r,n){if(t.isClosed(e))throw new t.ErrnoError(8);if(r<0||n<=0)throw new t.ErrnoError(28);if(!(e.flags&2097155))throw new t.ErrnoError(8);if(!t.isFile(e.node.mode)&&!t.isDir(e.node.mode))throw new t.ErrnoError(43);if(!e.stream_ops.allocate)throw new t.ErrnoError(138);e.stream_ops.allocate(e,r,n)},mmap:function(e,r,n,u,l,f){if(l&2&&!(f&2)&&(e.flags&2097155)!==2)throw new t.ErrnoError(2);if((e.flags&2097155)===1)throw new t.ErrnoError(2);if(!e.stream_ops.mmap)throw new t.ErrnoError(43);return e.stream_ops.mmap(e,r,n,u,l,f)},msync:function(e,r,n,u,l){return!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,r,n,u,l)},munmap:function(e){return 0},ioctl:function(e,r,n){if(!e.stream_ops.ioctl)throw new t.ErrnoError(59);return e.stream_ops.ioctl(e,r,n)},readFile:function(e,r){if(r=r||{},r.flags=r.flags||"r",r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error('Invalid encoding type "'+r.encoding+'"');var n,u=t.open(e,r.flags),l=t.stat(e),f=l.size,d=new Uint8Array(f);return t.read(u,d,0,f,0),r.encoding==="utf8"?n=se(d,0):r.encoding==="binary"&&(n=d),t.close(u),n},writeFile:function(e,r,n){n=n||{},n.flags=n.flags||"w";var u=t.open(e,n.flags,n.mode);if(typeof r=="string"){var l=new Uint8Array(Te(r)+1),f=Ae(r,l,0,l.length);t.write(u,l,0,f,void 0,n.canOwn)}else if(ArrayBuffer.isView(r))t.write(u,r,0,r.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");t.close(u)},cwd:function(){return t.currentPath},chdir:function(e){var r=t.lookupPath(e,{follow:!0});if(r.node===null)throw new t.ErrnoError(44);if(!t.isDir(r.node.mode))throw new t.ErrnoError(54);var n=t.nodePermissions(r.node,"x");if(n)throw new t.ErrnoError(n);t.currentPath=r.path},createDefaultDirectories:function(){t.mkdir("/tmp"),t.mkdir("/home"),t.mkdir("/home/web_user")},createDefaultDevices:function(){t.mkdir("/dev"),t.registerDevice(t.makedev(1,3),{read:function(){return 0},write:function(u,l,f,d,m){return d}}),t.mkdev("/dev/null",t.makedev(1,3)),oe.register(t.makedev(5,0),oe.default_tty_ops),oe.register(t.makedev(6,0),oe.default_tty1_ops),t.mkdev("/dev/tty",t.makedev(5,0)),t.mkdev("/dev/tty1",t.makedev(6,0));var e;if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var r=new Uint8Array(1);e=function(){return crypto.getRandomValues(r),r[0]}}else if(X)try{var n=require("crypto");e=function(){return n.randomBytes(1)[0]}}catch{}e||(e=function(){B("random_device")}),t.createDevice("/dev","random",e),t.createDevice("/dev","urandom",e),t.mkdir("/dev/shm"),t.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){t.mkdir("/proc"),t.mkdir("/proc/self"),t.mkdir("/proc/self/fd"),t.mount({mount:function(){var e=t.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(r,n){var u=+n,l=t.getStream(u);if(!l)throw new t.ErrnoError(8);var f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return l.path}}};return f.parent=f,f}},e}},{},"/proc/self/fd")},createStandardStreams:function(){h.stdin?t.createDevice("/dev","stdin",h.stdin):t.symlink("/dev/tty","/dev/stdin"),h.stdout?t.createDevice("/dev","stdout",null,h.stdout):t.symlink("/dev/tty","/dev/stdout"),h.stderr?t.createDevice("/dev","stderr",null,h.stderr):t.symlink("/dev/tty1","/dev/stderr"),t.open("/dev/stdin","r"),t.open("/dev/stdout","w"),t.open("/dev/stderr","w")},ensureErrnoError:function(){t.ErrnoError||(t.ErrnoError=function(r,n){this.node=n,this.setErrno=function(u){this.errno=u},this.setErrno(r),this.message="FS error"},t.ErrnoError.prototype=new Error,t.ErrnoError.prototype.constructor=t.ErrnoError,[44].forEach(function(e){t.genericErrors[e]=new t.ErrnoError(e),t.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){t.ensureErrnoError(),t.nameTable=new Array(4096),t.mount(R,{},"/"),t.createDefaultDirectories(),t.createDefaultDevices(),t.createSpecialDirectories(),t.filesystems={MEMFS:R}},init:function(e,r,n){t.init.initialized=!0,t.ensureErrnoError(),h.stdin=e||h.stdin,h.stdout=r||h.stdout,h.stderr=n||h.stderr,t.createStandardStreams()},quit:function(){t.init.initialized=!1;var e=h._fflush;e&&e(0);for(var r=0;r<t.streams.length;r++){var n=t.streams[r];n&&t.close(n)}},getMode:function(e,r){var n=0;return e&&(n|=365),r&&(n|=146),n},joinPath:function(e,r){var n=C.join.apply(null,e);return r&&n[0]=="/"&&(n=n.substr(1)),n},absolutePath:function(e,r){return Q.resolve(r,e)},standardizePath:function(e){return C.normalize(e)},findObject:function(e,r){var n=t.analyzePath(e,r);return n.exists?n.object:(ye(n.error),null)},analyzePath:function(e,r){try{var n=t.lookupPath(e,{follow:!r});e=n.path}catch{}var u={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=t.lookupPath(e,{parent:!0});u.parentExists=!0,u.parentPath=n.path,u.parentObject=n.node,u.name=C.basename(e),n=t.lookupPath(e,{follow:!r}),u.exists=!0,u.path=n.path,u.object=n.node,u.name=n.node.name,u.isRoot=n.path==="/"}catch(l){u.error=l.errno}return u},createFolder:function(e,r,n,u){var l=C.join2(typeof e=="string"?e:t.getPath(e),r),f=t.getMode(n,u);return t.mkdir(l,f)},createPath:function(e,r,n,u){e=typeof e=="string"?e:t.getPath(e);for(var l=r.split("/").reverse();l.length;){var f=l.pop();if(f){var d=C.join2(e,f);try{t.mkdir(d)}catch{}e=d}}return d},createFile:function(e,r,n,u,l){var f=C.join2(typeof e=="string"?e:t.getPath(e),r),d=t.getMode(u,l);return t.create(f,d)},createDataFile:function(e,r,n,u,l,f){var d=r?C.join2(typeof e=="string"?e:t.getPath(e),r):e,m=t.getMode(u,l),_=t.create(d,m);if(n){if(typeof n=="string"){for(var w=new Array(n.length),k=0,P=n.length;k<P;++k)w[k]=n.charCodeAt(k);n=w}t.chmod(_,m|146);var A=t.open(_,"w");t.write(A,n,0,n.length,0,f),t.close(A),t.chmod(_,m)}return _},createDevice:function(e,r,n,u){var l=C.join2(typeof e=="string"?e:t.getPath(e),r),f=t.getMode(!!n,!!u);t.createDevice.major||(t.createDevice.major=64);var d=t.makedev(t.createDevice.major++,0);return t.registerDevice(d,{open:function(m){m.seekable=!1},close:function(m){u&&u.buffer&&u.buffer.length&&u(10)},read:function(m,_,w,k,P){for(var A=0,S=0;S<k;S++){var O;try{O=n()}catch{throw new t.ErrnoError(29)}if(O===void 0&&A===0)throw new t.ErrnoError(6);if(O==null)break;A++,_[w+S]=O}return A&&(m.node.timestamp=Date.now()),A},write:function(m,_,w,k,P){for(var A=0;A<k;A++)try{u(_[w+A])}catch{throw new t.ErrnoError(29)}return k&&(m.node.timestamp=Date.now()),A}}),t.mkdev(l,f,d)},createLink:function(e,r,n,u,l){var f=C.join2(typeof e=="string"?e:t.getPath(e),r);return t.symlink(n,f)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var r=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ue)try{e.contents=He(ue(e.url),!0),e.usedBytes=e.contents.length}catch{r=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return r||ye(29),r},createLazyFile:function(e,r,n,u,l){function f(){this.lengthKnown=!1,this.chunks=[]}if(f.prototype.get=function(A){if(!(A>this.length-1||A<0)){var S=A%this.chunkSize,O=A/this.chunkSize|0;return this.getter(O)[S]}},f.prototype.setDataGetter=function(A){this.getter=A},f.prototype.cacheLength=function(){var A=new XMLHttpRequest;if(A.open("HEAD",n,!1),A.send(null),!(A.status>=200&&A.status<300||A.status===304))throw new Error("Couldn't load "+n+". Status: "+A.status);var S=Number(A.getResponseHeader("Content-length")),O,G=(O=A.getResponseHeader("Accept-Ranges"))&&O==="bytes",ce=(O=A.getResponseHeader("Content-Encoding"))&&O==="gzip",J=1024*1024;G||(J=S);var Me=function(ee,de){if(ee>de)throw new Error("invalid range ("+ee+", "+de+") or no bytes requested!");if(de>S-1)throw new Error("only "+S+" bytes available! programmer error!");var W=new XMLHttpRequest;if(W.open("GET",n,!1),S!==J&&W.setRequestHeader("Range","bytes="+ee+"-"+de),typeof Uint8Array<"u"&&(W.responseType="arraybuffer"),W.overrideMimeType&&W.overrideMimeType("text/plain; charset=x-user-defined"),W.send(null),!(W.status>=200&&W.status<300||W.status===304))throw new Error("Couldn't load "+n+". Status: "+W.status);return W.response!==void 0?new Uint8Array(W.response||[]):He(W.responseText||"")},K=this;K.setDataGetter(function(ee){var de=ee*J,W=(ee+1)*J-1;if(W=Math.min(W,S-1),typeof K.chunks[ee]>"u"&&(K.chunks[ee]=Me(de,W)),typeof K.chunks[ee]>"u")throw new Error("doXHR failed!");return K.chunks[ee]}),(ce||!S)&&(J=S=1,S=this.getter(0).length,J=S,he("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=S,this._chunkSize=J,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!z)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new f;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var m={isDevice:!1,contents:d}}else var m={isDevice:!1,url:n};var _=t.createFile(e,r,m,u,l);m.contents?_.contents=m.contents:m.url&&(_.contents=null,_.url=m.url),Object.defineProperties(_,{usedBytes:{get:function(){return this.contents.length}}});var w={},k=Object.keys(_.stream_ops);return k.forEach(function(P){var A=_.stream_ops[P];w[P]=function(){if(!t.forceLoadFile(_))throw new t.ErrnoError(29);return A.apply(null,arguments)}}),w.read=function(A,S,O,G,ce){if(!t.forceLoadFile(_))throw new t.ErrnoError(29);var J=A.node.contents;if(ce>=J.length)return 0;var Me=Math.min(J.length-ce,G);if(J.slice)for(var K=0;K<Me;K++)S[O+K]=J[ce+K];else for(var K=0;K<Me;K++)S[O+K]=J.get(ce+K);return Me},_.stream_ops=w,_},createPreloadedFile:function(e,r,n,u,l,f,d,m,_,w){Browser.init();var k=r?Q.resolve(C.join2(e,r)):e;function P(A){function S(G){w&&w(),m||t.createDataFile(e,r,G,u,l,_),f&&f(),Be()}var O=!1;h.preloadPlugins.forEach(function(G){O||G.canHandle(k)&&(G.handle(A,k,S,function(){d&&d(),Be()}),O=!0)}),O||S(A)}Qe(),typeof n=="string"?Browser.asyncLoad(n,function(A){P(A)},d):P(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,r,n){r=r||function(){},n=n||function(){};var u=t.indexedDB();try{var l=u.open(t.DB_NAME(),t.DB_VERSION)}catch(f){return n(f)}l.onupgradeneeded=function(){he("creating db");var d=l.result;d.createObjectStore(t.DB_STORE_NAME)},l.onsuccess=function(){var d=l.result,m=d.transaction([t.DB_STORE_NAME],"readwrite"),_=m.objectStore(t.DB_STORE_NAME),w=0,k=0,P=e.length;function A(){k==0?r():n()}e.forEach(function(S){var O=_.put(t.analyzePath(S).object.contents,S);O.onsuccess=function(){w++,w+k==P&&A()},O.onerror=function(){k++,w+k==P&&A()}}),m.onerror=n},l.onerror=n},loadFilesFromDB:function(e,r,n){r=r||function(){},n=n||function(){};var u=t.indexedDB();try{var l=u.open(t.DB_NAME(),t.DB_VERSION)}catch(f){return n(f)}l.onupgradeneeded=n,l.onsuccess=function(){var d=l.result;try{var m=d.transaction([t.DB_STORE_NAME],"readonly")}catch(S){n(S);return}var _=m.objectStore(t.DB_STORE_NAME),w=0,k=0,P=e.length;function A(){k==0?r():n()}e.forEach(function(S){var O=_.get(S);O.onsuccess=function(){t.analyzePath(S).exists&&t.unlink(S),t.createDataFile(C.dirname(S),C.basename(S),O.result,!0,!0,!0),w++,w+k==P&&A()},O.onerror=function(){k++,w+k==P&&A()}}),m.onerror=n},l.onerror=n}},D={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,r){if(r[0]!=="/"){var n;if(e===-100)n=t.cwd();else{var u=t.getStream(e);if(!u)throw new t.ErrnoError(8);n=u.path}r=C.join2(n,r)}return r},doStat:function(e,r,n){try{var u=e(r)}catch(l){if(l&&l.node&&C.normalize(r)!==C.normalize(t.getPath(l.node)))return-54;throw l}return b[n>>2]=u.dev,b[n+4>>2]=0,b[n+8>>2]=u.ino,b[n+12>>2]=u.mode,b[n+16>>2]=u.nlink,b[n+20>>2]=u.uid,b[n+24>>2]=u.gid,b[n+28>>2]=u.rdev,b[n+32>>2]=0,re=[u.size>>>0,(x=u.size,+Ie(x)>=1?x>0?(Fe(+Le(x/4294967296),4294967295)|0)>>>0:~~+De((x-+(~~x>>>0))/4294967296)>>>0:0)],b[n+40>>2]=re[0],b[n+44>>2]=re[1],b[n+48>>2]=4096,b[n+52>>2]=u.blocks,b[n+56>>2]=u.atime.getTime()/1e3|0,b[n+60>>2]=0,b[n+64>>2]=u.mtime.getTime()/1e3|0,b[n+68>>2]=0,b[n+72>>2]=u.ctime.getTime()/1e3|0,b[n+76>>2]=0,re=[u.ino>>>0,(x=u.ino,+Ie(x)>=1?x>0?(Fe(+Le(x/4294967296),4294967295)|0)>>>0:~~+De((x-+(~~x>>>0))/4294967296)>>>0:0)],b[n+80>>2]=re[0],b[n+84>>2]=re[1],0},doMsync:function(e,r,n,u,l){var f=fe.slice(e,e+n);t.msync(r,f,l,n,u)},doMkdir:function(e,r){return e=C.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),t.mkdir(e,r,0),0},doMknod:function(e,r,n){switch(r&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return t.mknod(e,r,n),0},doReadlink:function(e,r,n){if(n<=0)return-28;var u=t.readlink(e),l=Math.min(n,Te(u)),f=Z[r+l];return cr(u,r,n+1),Z[r+l]=f,l},doAccess:function(e,r){if(r&-8)return-28;var n,u=t.lookupPath(e,{follow:!0});if(n=u.node,!n)return-44;var l="";return r&4&&(l+="r"),r&2&&(l+="w"),r&1&&(l+="x"),l&&t.nodePermissions(n,l)?-2:0},doDup:function(e,r,n){var u=t.getStream(n);return u&&t.close(u),t.open(e,r,0,n,n).fd},doReadv:function(e,r,n,u){for(var l=0,f=0;f<n;f++){var d=b[r+f*8>>2],m=b[r+(f*8+4)>>2],_=t.read(e,Z,d,m,u);if(_<0)return-1;if(l+=_,_<m)break}return l},doWritev:function(e,r,n,u){for(var l=0,f=0;f<n;f++){var d=b[r+f*8>>2],m=b[r+(f*8+4)>>2],_=t.write(e,Z,d,m,u);if(_<0)return-1;l+=_}return l},varargs:void 0,get:function(){D.varargs+=4;var e=b[D.varargs-4>>2];return e},getStr:function(e){var r=Ee(e);return r},getStreamFromFD:function(e){var r=t.getStream(e);if(!r)throw new t.ErrnoError(8);return r},get64:function(e,r){return e}};function Lr(e,r,n){D.varargs=n;try{var u=D.getStreamFromFD(e);switch(r){case 0:{var l=D.get();if(l<0)return-28;var f;return f=t.open(u.path,u.flags,0,l),f.fd}case 1:case 2:return 0;case 3:return u.flags;case 4:{var l=D.get();return u.flags|=l,0}case 12:{var l=D.get(),d=0;return qe[l+d>>1]=2,0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:return ye(28),-1;default:return-28}}catch(m){return(typeof t>"u"||!(m instanceof t.ErrnoError))&&B(m),-m.errno}}function Fr(e,r,n){D.varargs=n;try{var u=D.getStreamFromFD(e);switch(r){case 21509:case 21505:return u.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return u.tty?0:-59;case 21519:{if(!u.tty)return-59;var l=D.get();return b[l>>2]=0,0}case 21520:return u.tty?-28:-59;case 21531:{var l=D.get();return t.ioctl(u,r,l)}case 21523:return u.tty?0:-59;case 21524:return u.tty?0:-59;default:B("bad ioctl syscall "+r)}}catch(f){return(typeof t>"u"||!(f instanceof t.ErrnoError))&&B(f),-f.errno}}function Br(e,r,n){D.varargs=n;try{var u=D.getStr(e),l=D.get(),f=t.open(u,r,l);return f.fd}catch(d){return(typeof t>"u"||!(d instanceof t.ErrnoError))&&B(d),-d.errno}}function Hr(e){try{return e=D.getStr(e),t.rmdir(e),0}catch(r){return(typeof t>"u"||!(r instanceof t.ErrnoError))&&B(r),-r.errno}}function Ur(e){try{var r=D.umask;return D.umask=e,r}catch(n){return(typeof t>"u"||!(n instanceof t.ErrnoError))&&B(n),-n.errno}}function zr(e){try{return e=D.getStr(e),t.unlink(e),0}catch(r){return(typeof t>"u"||!(r instanceof t.ErrnoError))&&B(r),-r.errno}}function xr(e,r,n,u){try{B("cannot wait on child processes")}catch(l){return(typeof t>"u"||!(l instanceof t.ErrnoError))&&B(l),-l.errno}}function jr(e,r,n){fe.copyWithin(e,r,r+n)}function Wr(){return fe.length}function Vr(e){try{return ne.grow(e-le.byteLength+65535>>>16),Ge(ne.buffer),1}catch{}}function Yr(e){e=e>>>0;var r=Wr(),n=65536,u=2147483648;if(e>u)return!1;for(var l=16777216,f=1;f<=4;f*=2){var d=r*(1+.2/f);d=Math.min(d,e+100663296);var m=Math.min(u,mr(Math.max(l,e,d),n)),_=Vr(m);if(_)return!0}return!1}var tr={};function Kr(){return F||"./this.program"}function ge(){if(!ge.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Kr()};for(var r in tr)e[r]=tr[r];var n=[];for(var r in e)n.push(r+"="+e[r]);ge.strings=n}return ge.strings}function qr(e,r){var n=0;return ge().forEach(function(u,l){var f=r+n;b[e+l*4>>2]=f,dr(u,f),n+=u.length+1}),0}function Gr(e,r){var n=ge();b[e>>2]=n.length;var u=0;return n.forEach(function(l){u+=l.length+1}),b[r>>2]=u,0}function Jr(e){sr(e)}function Xr(e){try{var r=D.getStreamFromFD(e);return t.close(r),0}catch(n){return(typeof t>"u"||!(n instanceof t.ErrnoError))&&B(n),n.errno}}function $r(e,r){try{var n=D.getStreamFromFD(e),u=n.tty?2:t.isDir(n.mode)?3:t.isLink(n.mode)?7:4;return Z[r>>0]=u,0}catch(l){return(typeof t>"u"||!(l instanceof t.ErrnoError))&&B(l),l.errno}}function Zr(e,r,n,u){try{var l=D.getStreamFromFD(e),f=D.doReadv(l,r,n);return b[u>>2]=f,0}catch(d){return(typeof t>"u"||!(d instanceof t.ErrnoError))&&B(d),d.errno}}function Qr(e,r,n,u,l){try{var f=D.getStreamFromFD(e),d=4294967296,m=n*d+(r>>>0),_=9007199254740992;return m<=-_||m>=_?-61:(t.llseek(f,m,u),re=[f.position>>>0,(x=f.position,+Ie(x)>=1?x>0?(Fe(+Le(x/4294967296),4294967295)|0)>>>0:~~+De((x-+(~~x>>>0))/4294967296)>>>0:0)],b[l>>2]=re[0],b[l+4>>2]=re[1],f.getdents&&m===0&&u===0&&(f.getdents=null),0)}catch(w){return(typeof t>"u"||!(w instanceof t.ErrnoError))&&B(w),w.errno}}function en(e,r,n,u){try{var l=D.getStreamFromFD(e),f=D.doWritev(l,r,n);return b[u>>2]=f,0}catch(d){return(typeof t>"u"||!(d instanceof t.ErrnoError))&&B(d),d.errno}}function rn(){H("missing function: popen"),B(-1)}function nn(){return 6}function tn(){}var ir=function(e,r,n,u){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=t.nextInode++,this.name=r,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=u},Re=365,ke=146;Object.defineProperties(ir.prototype,{read:{get:function(){return(this.mode&Re)===Re},set:function(e){e?this.mode|=Re:this.mode&=~Re}},write:{get:function(){return(this.mode&ke)===ke},set:function(e){e?this.mode|=ke:this.mode&=~ke}},isFolder:{get:function(){return t.isDir(this.mode)}},isDevice:{get:function(){return t.isChrdev(this.mode)}}}),t.FSNode=ir,t.staticInit();function He(e,r,n){var u=Te(e)+1,l=new Array(u),f=Ae(e,l,0,l.length);return l.length=f,l}var on={a:Or,s:Dr,d:Lr,i:Fr,e:Br,t:Hr,j:Ur,u:zr,v:xr,n:jr,b:Yr,p:qr,q:Gr,c:Jr,f:Xr,r:$r,h:Zr,m:Qr,g:en,memory:ne,o:rn,l:nn,k:tn,table:fr};Rr();var or=h.___wasm_call_ctors=function(){return(or=h.___wasm_call_ctors=h.asm.w).apply(null,arguments)},ar=h._malloc=function(){return(ar=h._malloc=h.asm.x).apply(null,arguments)},ur=h.___errno_location=function(){return(ur=h.___errno_location=h.asm.y).apply(null,arguments)};h._main=function(){return(h._main=h.asm.z).apply(null,arguments)};var Ue=h.stackAlloc=function(){return(Ue=h.stackAlloc=h.asm.A).apply(null,arguments)};h.dynCall_vi=function(){return(h.dynCall_vi=h.asm.B).apply(null,arguments)};var Pe;function ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ve=function e(){Pe||xe(),Pe||(ve=e)};function an(e){var r=h._main;e=e||[];function n(f){var d=f.length+1,m=Ue((d+1)*4);b[m>>2]=Ye(F);for(var _=1;_<d;_++)b[(m>>2)+_]=Ye(f[_-1]);return b[(m>>2)+d]=0,{argc:d,argv:m}}try{var u;for(let f=0;f<e.length;f++){let m=e[f].split(" ").filter(k=>!!k),{argc:_,argv:w}=n(m);if(u=r(_,w),u!==0)break}sr(u,!0)}catch(f){if(f instanceof ze)return;if(f=="unwind"){_e=!0;return}else{var l=f;f&&typeof f=="object"&&f.stack&&(l=[f,f.stack]),H("exception thrown: "+l),U(1,f)}}finally{}}function xe(e){if(e=e||Y,te>0||(vr(),te>0))return;function r(){Pe||(Pe=!0,h.calledRun=!0,!Oe&&(yr(),gr(),ae(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),lr&&an(e),Mr()))}h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),r()},1)):r()}h.run=xe;function sr(e,r){r&&_e&&e===0||(_e||(Oe=!0,h.onExit&&h.onExit(e)),U(e,new ze(e)))}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);h.preInit.length>0;)h.preInit.pop()();var lr=!0;return h.noInitialRun&&(lr=!1),_e=!0,xe(),q.ready}}();let s="";const c=L=>{s+=String.fromCharCode(L),L===10&&(console.log(s),s="")};let p="";var v={flush:()=>{s.length>0&&(console.log(s),s=""),p.length>0&&(console.error(p),p="")},stderr:L=>{p+=String.fromCharCode(L),L===10&&(console.error(p),p="")},stdout:c};const E=[],I=()=>new Promise(L=>{E.push(L),E.length===1&&E[0]()}),N=()=>{E.length>0&&(E.shift(),E.length>0&&E[0]())};return async(L={})=>{let{data:q=null,command:h=[],folder:ae=[],isStrict:M=!1}=L;return await I(),new Promise((T,Y)=>{let F=!1,U="";o({stdout:v.stdout,stderr:j=>{U+=String.fromCharCode(j),j===10&&(console.error(U),M&&Y(U))},arguments:h,input:q,folder:ae,output:j=>{T(j),F=!0}}).then(()=>{(0,v.flush)(),F||Y(),N()})})}}();class ImageBase{constructor(o,s){this.info=o,this.option=s}static async getDimension(o){const s=await createImageBitmap(o),c={width:s.width,height:s.height};return s.close(),c}async ensureOriginalDimension(){if(!this.info.width||!this.info.height){const o=await createImageBitmap(this.info.blob);this.info.width=o.width,this.info.height=o.height}}getOutputDimension(){if(!this.option.resizeWidth&&!this.option.resizeHeight)return{width:this.info.width,height:this.info.height};if(!this.option.resizeWidth&&this.option.resizeHeight){const s=this.option.resizeHeight/this.info.height*this.info.width;return{width:Math.ceil(s),height:Math.ceil(this.option.resizeHeight)}}if(this.option.resizeWidth&&!this.option.resizeHeight){const s=this.option.resizeWidth/this.info.width*this.info.height;return{width:Math.ceil(this.option.resizeWidth),height:Math.ceil(s)}}return{width:Math.ceil(this.option.resizeWidth),height:Math.ceil(this.option.resizeHeight)}}failResult(){return{width:this.info.width,height:this.info.height,blob:this.info.blob}}getPreviewDimension(){const o=this.option.maxPreviewSize;if(Math.max(this.info.width,this.info.height)<=o)return{width:this.info.width,height:this.info.height};let s,c;if(this.info.width>=this.info.height){const p=o/this.info.width;s=o,c=p*this.info.height}else s=o/this.info.height*this.info.width,c=o;return{width:Math.ceil(s),height:Math.ceil(c)}}async preview(){const{width:o,height:s}=this.getPreviewDimension();return{width:o,height:s,blob:await this.createBlob(o,s)}}async createCanvas(o,s){const c=new OffscreenCanvas(o,s),p=c.getContext("2d"),y=await createImageBitmap(this.info.blob);return p==null||p.drawImage(y,0,0,this.info.width,this.info.height,0,0,o,s),y.close(),{canvas:c,context:p}}async createBlob(o,s,c=.6){const{canvas:p}=await this.createCanvas(o,s),y={type:this.info.blob.type,quality:c};return p.convertToBlob(y)}}class GifImage extends ImageBase{static async create(o,s){const c=await ImageBase.getDimension(o.blob);return new GifImage({...o,...c},s)}async compress(){const o=this.option;try{const{width:s,height:c}=this.getOutputDimension(),p=[`--resize=${s}x${c}`,`--colors=${o.colors}`];o.dithering&&p.push("--dither=floyd-steinberg"),p.push(`--output=/out/${this.info.name}`),p.push(this.info.name);const y=await this.info.blob.arrayBuffer(),g=await gifsicle({data:[{file:y,name:this.info.name}],command:[p.join(" ")]});if(!Array.isArray(g)||g.length!==1)return this.failResult();const v=new Blob([g[0].file],{type:this.info.blob.type});return{width:s,height:c,blob:v}}catch{return this.failResult()}}async preview(){const o=this.option,{width:s,height:c}=this.getPreviewDimension(),p=[`--resize=${s}x${c}`,`--colors=${o.colors}`,`--output=/out/${this.info.name}`,this.info.name],y=await this.info.blob.arrayBuffer(),g=await gifsicle({data:[{file:y,name:this.info.name}],command:[p.join(" ")]});if(!Array.isArray(g)||g.length!==1)return{width:this.info.width,height:this.info.height,blob:this.info.blob};const v=new Blob([g[0].file],{type:this.info.blob.type});return{width:s,height:c,blob:v}}}class JpegImage extends ImageBase{static async create(o,s){const c=await ImageBase.getDimension(o.blob);return new JpegImage({...o,...c},s)}async compress(){const o=this.option,s=this.getOutputDimension(),c=await this.createBlob(s.width,s.height,o.quality);return{...s,blob:c}}}var pngWasmBinaryFile="/assets/png-Cyqlb_Eu.wasm";let Module;Module||(Module=(typeof Module<"u"?Module:null)||{wasmBinaryFile:pngWasmBinaryFile});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(o,s){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),o=nodePath.normalize(o);var c=nodeFS.readFileSync(o);return s?c:c.toString()},Module.readBinary=function(o){var s=Module.read(o,!0);return s.buffer||(s=new Uint8Array(s)),assert(s.buffer),s},Module.load=function(o){globalEval(read(o))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),process.on("uncaughtException",function(a){if(!(a instanceof ExitStatus))throw a}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr<"u"&&(Module.printErr=printErr),typeof read<"u"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(o){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(o));var s=read(o,"binary");return assert(typeof s=="object"),s},typeof scriptArgs<"u"?Module.arguments=scriptArgs:typeof arguments<"u"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(a,o){quit(a)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(o){var s=new XMLHttpRequest;return s.open("GET",o,!1),s.send(null),s.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(o){var s=new XMLHttpRequest;return s.open("GET",o,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),Module.readAsync=function(o,s,c){var p=new XMLHttpRequest;p.open("GET",o,!0),p.responseType="arraybuffer",p.onload=function(){p.status==200||p.status==0&&p.response?s(p.response):c()},p.onerror=c,p.send(null)},typeof arguments<"u"&&(Module.arguments=arguments),typeof console<"u")Module.print||(Module.print=function(o){console.log(o)}),Module.printErr||(Module.printErr=function(o){console.warn(o)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump<"u"?function(a){dump(a)}:function(a){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle>"u"&&(Module.setWindowTitle=function(a){document.title=a})}else throw"Unknown runtime environment. Where are we?";function globalEval(a){eval.call(null,a)}!Module.load&&Module.read&&(Module.load=function(o){globalEval(Module.read(o))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(a,o){throw o}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(a){return tempRet0=a,a},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(a){STACKTOP=a},getNativeTypeSize:function(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(a[a.length-1]==="*")return Runtime.QUANTUM_SIZE;if(a[0]==="i"){var o=parseInt(a.substr(1));return assert(o%8===0),o/8}else return 0}}},getNativeFieldSize:function(a){return Math.max(Runtime.getNativeTypeSize(a),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(a,o){return o==="double"||o==="i64"?a&7&&(assert((a&7)===4),a+=4):assert((a&3)===0),a},getAlignSize:function(a,o,s){return!s&&(a=="i64"||a=="double")?8:a?Math.min(o||(a?Runtime.getNativeFieldSize(a):0),Runtime.QUANTUM_SIZE):Math.min(o,8)},dynCall:function(a,o,s){return s&&s.length?Module["dynCall_"+a].apply(null,[o].concat(s)):Module["dynCall_"+a].call(null,o)},functionPointers:[],addFunction:function(a){for(var o=0;o<Runtime.functionPointers.length;o++)if(!Runtime.functionPointers[o])return Runtime.functionPointers[o]=a,2*(1+o);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(a){Runtime.functionPointers[(a-2)/2]=null},warnOnce:function(a){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[a]||(Runtime.warnOnce.shown[a]=1,Module.printErr(a))},funcWrappers:{},getFuncWrapper:function(a,o){if(a){assert(o),Runtime.funcWrappers[o]||(Runtime.funcWrappers[o]={});var s=Runtime.funcWrappers[o];return s[a]||(o.length===1?s[a]=function(){return Runtime.dynCall(o,a)}:o.length===2?s[a]=function(p){return Runtime.dynCall(o,a,[p])}:s[a]=function(){return Runtime.dynCall(o,a,Array.prototype.slice.call(arguments))}),s[a]}},getCompilerSetting:function(a){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(a){var o=STACKTOP;return STACKTOP=STACKTOP+a|0,STACKTOP=STACKTOP+15&-16,o},staticAlloc:function(a){var o=STATICTOP;return STATICTOP=STATICTOP+a|0,STATICTOP=STATICTOP+15&-16,o},dynamicAlloc:function(a){var o=HEAP32[DYNAMICTOP_PTR>>2],s=(o+a+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=s,s>=TOTAL_MEMORY){var c=enlargeMemory();if(!c)return HEAP32[DYNAMICTOP_PTR>>2]=o,0}return o},alignMemory:function(a,o){var s=a=Math.ceil(a/(o||16))*(o||16);return s},makeBigInt:function(a,o,s){var c=s?+(a>>>0)+ +(o>>>0)*4294967296:+(a>>>0)+ +(o|0)*4294967296;return c},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(a,o){a||abort("Assertion failed: "+o)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(a){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(a){var o=Runtime.stackAlloc(a.length);return writeArrayToMemory(a,o),o},stringToC:function(a){var o=0;if(a!=null&&a!==0){var s=(a.length<<2)+1;o=Runtime.stackAlloc(s),stringToUTF8(a,o,s)}return o}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(o,s,c,p,y){var g=getCFunc(o),v=[],E=0;if(p)for(var I=0;I<p.length;I++){var N=toC[c[I]];N?(E===0&&(E=Runtime.stackSave()),v[I]=N(p[I])):v[I]=p[I]}var V=g.apply(null,v);if(s==="string"&&(V=Pointer_stringify(V)),E!==0){if(y&&y.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(E)});return}Runtime.stackRestore(E)}return V};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(a){var o=a.toString().match(sourceRegex).slice(1);return{arguments:o[0],body:o[1],returnValue:o[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var a in JSfuncs)JSfuncs.hasOwnProperty(a)&&(JSsource[a]=parseJSFunc(JSfuncs[a]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(a){return a==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(a,o){return"$"+o}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(a,o,s,c){switch(s=s||"i8",s.charAt(s.length-1)==="*"&&(s="i32"),s){case"i1":HEAP8[a>>0]=o;break;case"i8":HEAP8[a>>0]=o;break;case"i16":HEAP16[a>>1]=o;break;case"i32":HEAP32[a>>2]=o;break;case"i64":tempI64=[o>>>0,(tempDouble=o,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[a>>2]=tempI64[0],HEAP32[a+4>>2]=tempI64[1];break;case"float":HEAPF32[a>>2]=o;break;case"double":HEAPF64[a>>3]=o;break;default:abort("invalid type for setValue: "+s)}}Module.setValue=setValue;function getValue(a,o,s){switch(o=o||"i8",o.charAt(o.length-1)==="*"&&(o="i32"),o){case"i1":return HEAP8[a>>0];case"i8":return HEAP8[a>>0];case"i16":return HEAP16[a>>1];case"i32":return HEAP32[a>>2];case"i64":return HEAP32[a>>2];case"float":return HEAPF32[a>>2];case"double":return HEAPF64[a>>3];default:abort("invalid type for setValue: "+o)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(a,o,s,c){var p,y;typeof a=="number"?(p=!0,y=a):(p=!1,y=a.length);var g=typeof o=="string"?o:null,v;if(s==ALLOC_NONE?v=c:v=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][s===void 0?ALLOC_STATIC:s](Math.max(y,g?1:o.length)),p){var c=v,E;for(assert((v&3)==0),E=v+(y&-4);c<E;c+=4)HEAP32[c>>2]=0;for(E=v+y;c<E;)HEAP8[c++>>0]=0;return v}if(g==="i8")return a.subarray||a.slice?HEAPU8.set(a,v):HEAPU8.set(new Uint8Array(a),v),v;for(var I=0,N,V,L;I<y;){var q=a[I];if(typeof q=="function"&&(q=Runtime.getFunctionIndex(q)),N=g||o[I],N===0){I++;continue}N=="i64"&&(N="i32"),setValue(v+I,q,N),L!==N&&(V=Runtime.getNativeTypeSize(N),L=N),I+=V}return v}Module.allocate=allocate;function getMemory(a){return staticSealed?runtimeInitialized?_malloc(a):Runtime.dynamicAlloc(a):Runtime.staticAlloc(a)}Module.getMemory=getMemory;function Pointer_stringify(a,o){if(o===0||!a)return"";for(var s=0,c,p=0;c=HEAPU8[a+p>>0],s|=c,!(c==0&&!o||(p++,o&&p==o)););o||(o=p);var y="";if(s<128){for(var g=1024,v;o>0;)v=String.fromCharCode.apply(String,HEAPU8.subarray(a,a+Math.min(o,g))),y=y?y+v:v,a+=g,o-=g;return y}return Module.UTF8ToString(a)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(a){for(var o="";;){var s=HEAP8[a++>>0];if(!s)return o;o+=String.fromCharCode(s)}}Module.AsciiToString=AsciiToString;function stringToAscii(a,o){return writeAsciiToMemory(a,o,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(a,o){for(var s=o;a[s];)++s;if(s-o>16&&a.subarray&&UTF8Decoder)return UTF8Decoder.decode(a.subarray(o,s));for(var c,p,y,g,v,E,I="";;){if(c=a[o++],!c)return I;if(!(c&128)){I+=String.fromCharCode(c);continue}if(p=a[o++]&63,(c&224)==192){I+=String.fromCharCode((c&31)<<6|p);continue}if(y=a[o++]&63,(c&240)==224?c=(c&15)<<12|p<<6|y:(g=a[o++]&63,(c&248)==240?c=(c&7)<<18|p<<12|y<<6|g:(v=a[o++]&63,(c&252)==248?c=(c&3)<<24|p<<18|y<<12|g<<6|v:(E=a[o++]&63,c=(c&1)<<30|p<<24|y<<18|g<<12|v<<6|E))),c<65536)I+=String.fromCharCode(c);else{var N=c-65536;I+=String.fromCharCode(55296|N>>10,56320|N&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(a){return UTF8ArrayToString(HEAPU8,a)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(a,o,s,c){if(!(c>0))return 0;for(var p=s,y=s+c-1,g=0;g<a.length;++g){var v=a.charCodeAt(g);if(v>=55296&&v<=57343&&(v=65536+((v&1023)<<10)|a.charCodeAt(++g)&1023),v<=127){if(s>=y)break;o[s++]=v}else if(v<=2047){if(s+1>=y)break;o[s++]=192|v>>6,o[s++]=128|v&63}else if(v<=65535){if(s+2>=y)break;o[s++]=224|v>>12,o[s++]=128|v>>6&63,o[s++]=128|v&63}else if(v<=2097151){if(s+3>=y)break;o[s++]=240|v>>18,o[s++]=128|v>>12&63,o[s++]=128|v>>6&63,o[s++]=128|v&63}else if(v<=67108863){if(s+4>=y)break;o[s++]=248|v>>24,o[s++]=128|v>>18&63,o[s++]=128|v>>12&63,o[s++]=128|v>>6&63,o[s++]=128|v&63}else{if(s+5>=y)break;o[s++]=252|v>>30,o[s++]=128|v>>24&63,o[s++]=128|v>>18&63,o[s++]=128|v>>12&63,o[s++]=128|v>>6&63,o[s++]=128|v&63}}return o[s]=0,s-p}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(a,o,s){return stringToUTF8Array(a,HEAPU8,o,s)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(a){for(var o=0,s=0;s<a.length;++s){var c=a.charCodeAt(s);c>=55296&&c<=57343&&(c=65536+((c&1023)<<10)|a.charCodeAt(++s)&1023),c<=127?++o:c<=2047?o+=2:c<=65535?o+=3:c<=2097151?o+=4:c<=67108863?o+=5:o+=6}return o}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function demangle(a){var o=Module.___cxa_demangle||Module.__cxa_demangle;if(o){try{var s=a.substr(1),c=lengthBytesUTF8(s)+1,p=_malloc(c);stringToUTF8(s,p,c);var y=_malloc(4),g=o(p,0,0,y);if(getValue(y,"i32")===0&&g)return Pointer_stringify(g)}catch{}finally{p&&_free(p),y&&_free(y),g&&_free(g)}return a}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),a}function demangleAll(a){var o=/__Z[\w\d_]+/g;return a.replace(o,function(s){var c=demangle(s);return s===c?s:s+" ["+c+"]"})}function jsStackTrace(){var a=new Error;if(!a.stack){try{throw new Error(0)}catch(o){a=o}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}function stackTrace(){var a=jsStackTrace();return Module.extraStackTrace&&(a+=`
`+Module.extraStackTrace()),demangleAll(a)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(a,o){return a%o>0&&(a+=o-a%o),a}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(a){Module.buffer=buffer=a}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(a){var o;try{if(ArrayBuffer.transfer)o=ArrayBuffer.transfer(buffer,a);else{var s=HEAP8;o=new ArrayBuffer(a);var c=new Int8Array(o);c.set(s)}}catch{return!1}var p=_emscripten_replace_memory(o);return p?o:!1});function enlargeMemory(){var a=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,o=2147483648-a;if(HEAP32[DYNAMICTOP_PTR>>2]>o)return!1;var s=TOTAL_MEMORY;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,a):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,a),o);var c=Module.reallocBuffer(TOTAL_MEMORY);return!c||c.byteLength!=TOTAL_MEMORY?(TOTAL_MEMORY=s,!1):(updateGlobalBuffer(c),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(a){byteLength=function(o){return o.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(a){for(;a.length>0;){var o=a.shift();if(typeof o=="function"){o();continue}var s=o.func;typeof s=="number"?o.arg===void 0?Module.dynCall_v(s):Module.dynCall_vi(s,o.arg):s(o.arg===void 0?null:o.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(a){__ATPRERUN__.unshift(a)}Module.addOnPreRun=addOnPreRun;function addOnInit(a){__ATINIT__.unshift(a)}Module.addOnInit=addOnInit;function addOnPreMain(a){__ATMAIN__.unshift(a)}Module.addOnPreMain=addOnPreMain;function addOnExit(a){__ATEXIT__.unshift(a)}Module.addOnExit=addOnExit;function addOnPostRun(a){__ATPOSTRUN__.unshift(a)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(a,o,s){var c=s>0?s:lengthBytesUTF8(a)+1,p=new Array(c),y=stringToUTF8Array(a,p,0,p.length);return o&&(p.length=y),p}Module.intArrayFromString=intArrayFromString;function intArrayToString(a){for(var o=[],s=0;s<a.length;s++){var c=a[s];c>255&&(c&=255),o.push(String.fromCharCode(c))}return o.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(a,o,s){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var c,p;s&&(p=o+lengthBytesUTF8(a),c=HEAP8[p]),stringToUTF8(a,o,1/0),s&&(HEAP8[p]=c)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(a,o){HEAP8.set(a,o)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(a,o,s){for(var c=0;c<a.length;++c)HEAP8[o++>>0]=a.charCodeAt(c);s||(HEAP8[o>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function a(o,s){var c=o>>>16,p=o&65535,y=s>>>16,g=s&65535;return p*g+(c*g+p*y<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(a){return froundBuffer[0]=a,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(a){a=a>>>0;for(var o=0;o<32;o++)if(a&1<<31-o)return o;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(a){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(a){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var o=dependenciesFulfilled;dependenciesFulfilled=null,o()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(){var a=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=a;var o=Module.wasmTextFile||"image_compressor.wast",s=Module.wasmBinaryFile||"image_compressor.wasm",c=Module.asmjsCodeFile||"image_compressor.temp.asm.js";typeof Module.locateFile=="function"&&(o=Module.locateFile(o),s=Module.locateFile(s),c=Module.locateFile(c));var p=64*1024,y={"f64-rem":function(M,T){return M%T},"f64-to-int":function(M){return M|0},"i32s-div":function(M,T){return(M|0)/(T|0)|0},"i32u-div":function(M,T){return(M>>>0)/(T>>>0)>>>0},"i32s-rem":function(M,T){return(M|0)%(T|0)|0},"i32u-rem":function(M,T){return(M>>>0)%(T>>>0)>>>0},debugger:function(){debugger}},g={global:null,env:null,asm2wasm:y,parent:Module},v=null;function E(M){var T=Module.buffer;M.byteLength<T.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var Y=new Int8Array(T),F=new Int8Array(M);memoryInitializer||Y.set(F.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),F.set(Y),updateGlobalBuffer(M),updateGlobalBufferViews()}function I(M){return M}function N(){try{var M;if(Module.wasmBinary)M=Module.wasmBinary,M=new Uint8Array(M);else if(Module.readBinary)M=Module.readBinary(s);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return M}catch(T){abort(T)}}function V(){return!Module.wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch=="function"?fetch(s,{credentials:"same-origin"}).then(function(M){if(!M.ok)throw"failed to load wasm binary file at '"+s+"'";return M.arrayBuffer()}):new Promise(function(M,T){M(N())})}function L(M,T,Y){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;T.memory=Module.wasmMemory,g.global={NaN:NaN,Infinity:1/0},g["global.Math"]=M.Math,g.env=T;function F(z){v=z.exports,v.memory&&E(v.memory),Module.asm=v,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(g,F)}catch(z){return Module.printErr("Module.instantiateWasm callback failed with error: "+z),!1}function U(z){F(z.instance)}function j(z){V().then(function(X){return WebAssembly.instantiate(X,g)}).then(z).catch(function(X){Module.printErr("failed to asynchronously prepare wasm: "+X),abort(X)})}return!Module.wasmBinary&&typeof WebAssembly.instantiateStreaming=="function"?WebAssembly.instantiateStreaming(fetch(s,{credentials:"same-origin"}),g).then(U).catch(function(z){Module.printErr("wasm streaming compile failed: "+z),Module.printErr("falling back to ArrayBuffer instantiation"),j(U)}):j(U),{}}Module.asmPreload=Module.asm;var q=Module.reallocBuffer,h=function(M){var T=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;M=alignUp(M,T);var Y=Module.buffer,F=Y.byteLength;if(Module.usingWasm)try{var U=Module.wasmMemory.grow((M-F)/p);return U!==-1?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return v.__growWasmMemory((M-F)/p),Module.buffer!==Y?Module.buffer:null};Module.reallocBuffer=function(M){return ae==="asmjs"?q(M):h(M)};var ae="";Module.asm=function(M,T,Y){if(M=M,T=T,!T.table){var F=Module.wasmTableSize;F===void 0&&(F=1024);var U=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?U!==void 0?T.table=new WebAssembly.Table({initial:F,maximum:U,element:"anyfunc"}):T.table=new WebAssembly.Table({initial:F,element:"anyfunc"}):T.table=new Array(F),Module.wasmTable=T.table}T.memoryBase||(T.memoryBase=Module.STATIC_BASE),T.tableBase||(T.tableBase=0);var j;return j=L(M,T),j||abort("no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods"),j},Module.asm}integrateWasmJS(),STATIC_BASE=Runtime.GLOBAL_BASE,STATICTOP=STATIC_BASE+21776,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"image_compressor.js.mem":null;var STATIC_BUMP=21776;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function _longjmp(a,o){throw Module.setThrew(a,o||1),"longjmp"}function _abort(){Module.abort()}function _emscripten_longjmp(a,o){_longjmp(a,o)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(a){SYSCALLS.varargs+=4;var o=HEAP32[SYSCALLS.varargs-4>>2];return o},getStr:function(){var a=Pointer_stringify(SYSCALLS.get());return a},get64:function(){var a=SYSCALLS.get(),o=SYSCALLS.get();return a>=0?assert(o===0):assert(o===-1),a},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(a,o){SYSCALLS.varargs=o;try{var s=SYSCALLS.getStreamFromFD();return FS.close(s),0}catch(c){return(typeof FS>"u"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function _llvm_stackrestore(a){var o=_llvm_stacksave,s=o.LLVM_SAVEDSTACKS[a];o.LLVM_SAVEDSTACKS.splice(a,1),Runtime.stackRestore(s)}function ___setErrNo(a){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=a),a}function _emscripten_memcpy_big(a,o,s){return HEAPU8.set(HEAPU8.subarray(o,o+s),a),a}var _llvm_pow_f32=Math_pow;function _llvm_stacksave(){var a=_llvm_stacksave;return a.LLVM_SAVEDSTACKS||(a.LLVM_SAVEDSTACKS=[]),a.LLVM_SAVEDSTACKS.push(Runtime.stackSave()),a.LLVM_SAVEDSTACKS.length-1}var _llvm_pow_f64=Math_pow;function ___syscall140(a,o){SYSCALLS.varargs=o;try{var s=SYSCALLS.getStreamFromFD(),c=SYSCALLS.get(),p=SYSCALLS.get(),y=SYSCALLS.get(),g=SYSCALLS.get(),v=p;return FS.llseek(s,v,g),HEAP32[y>>2]=s.position,s.getdents&&v===0&&g===0&&(s.getdents=null),0}catch(E){return(typeof FS>"u"||!(E instanceof FS.ErrnoError))&&abort(E),-E.errno}}function ___syscall146(a,o){SYSCALLS.varargs=o;try{var s=SYSCALLS.get(),c=SYSCALLS.get(),p=SYSCALLS.get(),y=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(N,V){var L=___syscall146.buffers[N];assert(L),V===0||V===10?((N===1?Module.print:Module.printErr)(UTF8ArrayToString(L,0)),L.length=0):L.push(V)});for(var g=0;g<p;g++){for(var v=HEAP32[c+g*8>>2],E=HEAP32[c+(g*8+4)>>2],I=0;I<E;I++)___syscall146.printChar(s,HEAPU8[v+I]);y+=E}return y}catch(N){return(typeof FS>"u"||!(N instanceof FS.ErrnoError))&&abort(N),-N.errno}}function ___syscall54(a,o){SYSCALLS.varargs=o;try{return 0}catch(s){return(typeof FS>"u"||!(s instanceof FS.ErrnoError))&&abort(s),-s.errno}}__ATEXIT__.push(function(){var a=Module._fflush;a&&a(0);var o=___syscall146.printChar;if(o){var s=___syscall146.buffers;s[1].length&&o(1,10),s[2].length&&o(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=94,Module.wasmMaxTableSize=94;function invoke_iiii(a,o,s,c){try{return Module.dynCall_iiii(a,o,s,c)}catch(p){if(typeof p!="number"&&p!=="longjmp")throw p;Module.setThrew(1,0)}}function invoke_vif(a,o,s){try{Module.dynCall_vif(a,o,s)}catch(c){if(typeof c!="number"&&c!=="longjmp")throw c;Module.setThrew(1,0)}}function invoke_viiiii(a,o,s,c,p,y){try{Module.dynCall_viiiii(a,o,s,c,p,y)}catch(g){if(typeof g!="number"&&g!=="longjmp")throw g;Module.setThrew(1,0)}}function invoke_i(a){try{return Module.dynCall_i(a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}function invoke_vi(a,o){try{Module.dynCall_vi(a,o)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_vii(a,o,s){try{Module.dynCall_vii(a,o,s)}catch(c){if(typeof c!="number"&&c!=="longjmp")throw c;Module.setThrew(1,0)}}function invoke_viiiiiiiii(a,o,s,c,p,y,g,v,E,I){try{Module.dynCall_viiiiiiiii(a,o,s,c,p,y,g,v,E,I)}catch(N){if(typeof N!="number"&&N!=="longjmp")throw N;Module.setThrew(1,0)}}function invoke_iiiiid(a,o,s,c,p,y){try{return Module.dynCall_iiiiid(a,o,s,c,p,y)}catch(g){if(typeof g!="number"&&g!=="longjmp")throw g;Module.setThrew(1,0)}}function invoke_ii(a,o){try{return Module.dynCall_ii(a,o)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_iif(a,o,s){try{return Module.dynCall_iif(a,o,s)}catch(c){if(typeof c!="number"&&c!=="longjmp")throw c;Module.setThrew(1,0)}}function invoke_viii(a,o,s,c){try{Module.dynCall_viii(a,o,s,c)}catch(p){if(typeof p!="number"&&p!=="longjmp")throw p;Module.setThrew(1,0)}}function invoke_v(a){try{Module.dynCall_v(a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}function invoke_iiiii(a,o,s,c,p){try{return Module.dynCall_iiiii(a,o,s,c,p)}catch(y){if(typeof y!="number"&&y!=="longjmp")throw y;Module.setThrew(1,0)}}function invoke_iii(a,o,s){try{return Module.dynCall_iii(a,o,s)}catch(c){if(typeof c!="number"&&c!=="longjmp")throw c;Module.setThrew(1,0)}}function invoke_ifi(a,o,s){try{return Module.dynCall_ifi(a,o,s)}catch(c){if(typeof c!="number"&&c!=="longjmp")throw c;Module.setThrew(1,0)}}function invoke_viiii(a,o,s,c,p){try{Module.dynCall_viiii(a,o,s,c,p)}catch(y){if(typeof y!="number"&&y!=="longjmp")throw y;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_vif,invoke_viiiii,invoke_i,invoke_vi,invoke_vii,invoke_viiiiiiiii,invoke_iiiiid,invoke_ii,invoke_iif,invoke_viii,invoke_v,invoke_iiiii,invoke_iii,invoke_ifi,invoke_viiii,_longjmp,_llvm_pow_f64,___lock,___syscall6,___setErrNo,_abort,___syscall140,_llvm_pow_f32,_emscripten_longjmp,_emscripten_memcpy_big,___syscall54,___unlock,_llvm_stackrestore,_llvm_stacksave,___syscall146,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm,Module._testSetjmp=function(){return Module.asm._testSetjmp.apply(null,arguments)},Module._saveSetjmp=function(){return Module.asm._saveSetjmp.apply(null,arguments)},Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module._realloc=function(){return Module.asm._realloc.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)},Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)},Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)},Module._memset=function(){return Module.asm._memset.apply(null,arguments)},Module._compress=function(){return Module.asm._compress.apply(null,arguments)};var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)},Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)};var _emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)},Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)},Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_vif=function(){return Module.asm.dynCall_vif.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_i=function(){return Module.asm.dynCall_i.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_vii=function(){return Module.asm.dynCall_vii.apply(null,arguments)},Module.dynCall_viiiiiiiii=function(){return Module.asm.dynCall_viiiiiiiii.apply(null,arguments)},Module.dynCall_iiiiid=function(){return Module.asm.dynCall_iiiiid.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_iif=function(){return Module.asm.dynCall_iif.apply(null,arguments)},Module.dynCall_viii=function(){return Module.asm.dynCall_viii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_iiiii=function(){return Module.asm.dynCall_iiiii.apply(null,arguments)},Module.dynCall_iii=function(){return Module.asm.dynCall_iii.apply(null,arguments)},Module.dynCall_ifi=function(){return Module.asm.dynCall_ifi.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let a=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(o){o.byteLength&&(o=new Uint8Array(o)),HEAPU8.set(o,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let o=function(){var s=Module.memoryInitializerRequest;if(s.status!==200&&s.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+s.status+", retrying "+memoryInitializer),a();return}applyMemoryInitializer(s.response)};Module.memoryInitializerRequest.response?setTimeout(o,0):Module.memoryInitializerRequest.addEventListener("load",o)}else a()}function ExitStatus(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function a(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=a)},Module.callMain=Module.callMain=function a(o){o=o||[],ensureInitRuntime();var s=o.length+1;function c(){for(var E=0;E<3;E++)p.push(0)}var p=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];c();for(var y=0;y<s-1;y=y+1)p.push(allocate(intArrayFromString(o[y]),"i8",ALLOC_NORMAL)),c();p.push(0),p=allocate(p,"i32",ALLOC_NORMAL);try{var g=Module._main(s,p,0);exit(g,!0)}catch(E){if(E instanceof ExitStatus)return;if(E=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var v=E;E&&typeof E=="object"&&E.stack&&(v=[E,E.stack]),Module.printErr("exception thrown: "+v),Module.quit(1,E)}}finally{}};function run(a){if(a=a||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function o(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(a),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),o()},1)):o()}Module.run=Module.run=run;function exit(a,o){o&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(a)),ENVIRONMENT_IS_NODE&&process.exit(a),Module.quit(a,new ExitStatus(a)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(a){Module.onAbort&&Module.onAbort(a),a!==void 0?(Module.print(a),Module.printErr(a),a=JSON.stringify(a)):a="",ABORT=!0;var o=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,s="abort("+a+") at "+stackTrace()+o;throw abortDecorators&&abortDecorators.forEach(function(c){s=c(s,a)}),s}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),Module.noExitRuntime=!0,run();class PngImage extends ImageBase{static async create(o,s){const c=await ImageBase.getDimension(o.blob);return new PngImage({...o,...c},s)}async compress(){const o=this.option,{width:s,height:c}=this.getOutputDimension(),{context:p}=await this.createCanvas(s,c),y=p.getImageData(0,0,s,c).data;try{const g=Module._malloc(y.byteLength);Module.HEAPU8.set(y,g);const v=s*c*4;if(y.byteLength!==v)return this.failResult();const E=Module._malloc(4);if(Module._compress(s,c,o.colors,o.dithering,g,E))return this.failResult();const N=Module.getValue(E,"i32",!1),V=new Uint8Array(N);return V.set(Module.HEAPU8.subarray(g,g+N)),Module._free(g),Module._free(E),{width:s,height:c,blob:new Blob([V],{type:this.info.blob.type})}}catch{return this.failResult()}}}async function createHandler(a){const o=a.info.blob.type.toLowerCase();if(["image/jpeg","image/webp"].includes(o))return JpegImage.create(a.info,a.option);if(o==="image/png")return PngImage.create(a.info,a.option);if(o==="image/gif")return GifImage.create(a.info,a.option)}const queue=new Queue(3);globalThis.addEventListener("message",async a=>{queue.push(async()=>{const o=await createHandler(a.data);if(o){const s=await o.preview(),c={key:o.info.key,width:o.info.width,height:o.info.height,preview:s};globalThis.postMessage(c)}})})})();
